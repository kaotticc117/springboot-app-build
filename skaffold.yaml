apiVersion: skaffold/v4beta11
kind: Config
metadata:
  name: my-app
build:
  artifacts:
    - image: gcr.io/dauntless-tube-441623-h6/springboot-app
deploy:
  kubectl:
    manifests:
      - deploy/deployment.yaml
      - deploy/service.yaml
      - deploy/ingress.yaml
    flags:
      apply: ["--prune=false"]
profiles:
  - name: target-1
    deploy:
      kubectl:
        manifests:
          - deploy/deployment.yaml
          - deploy/service.yaml
          - deploy/ingress.yaml
        flags:
          apply: ["--prune=false"]
    build:
      artifacts:
        - image: gcr.io/dauntless-tube-441623-h6/springboot-app
          tag: gcr.io/dauntless-tube-441623-h6/springboot-app:${SHORT_SHA}
